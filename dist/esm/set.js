import{SRC as t,POSTER as a,DATA as s,SIZES as o,SRCSET as r}from"./constants.js";import{getData as e,setStatus as m}from"./data.js";import{statusApplied as i,statusLoading as c}from"./elementStatus.js";import{safeCallback as d}from"./callback.js";import{addClass as l}from"./class.js";import{getTempImage as n}from"./tempImage.js";import{isHiDpi as p}from"./environment.js";import{unobserve as g}from"./unobserve.js";import{updateLoadingCount as _}from"./counters.js";import{forEachPictureSource as b,forEachVideoSource as u}from"./forEachSource.js";import{setOriginalsObject as f,attrsSrcSrcsetSizes as j,attrsSrc as k,attrsSrcPoster as I,attrsData as y}from"./originalAttributes.js";const A=(t,a,s)=>{l(t,a.class_applied),m(t,i),s&&(a.unobserve_completed&&g(t,a),d(a.callback_applied,t,s))},E=(t,a,s)=>{l(t,a.class_loading),m(t,c),s&&(_(s,1),d(a.callback_loading,t,s))},h=(t,a,s)=>{s&&t.setAttribute(a,s)},v=(a,s)=>{h(a,o,e(a,s.data_sizes)),h(a,r,e(a,s.data_srcset)),h(a,t,e(a,s.data_src))},$=(t,a)=>{b(t,(t=>{f(t,j),v(t,a)})),f(t,j),v(t,a)},M=(a,s)=>{f(a,k),h(a,t,e(a,s.data_src))},N=(s,o)=>{u(s,(a=>{f(a,k),h(a,t,e(a,o.data_src))})),f(s,I),h(s,a,e(s,o.data_poster)),h(s,t,e(s,o.data_src)),s.load()},O=(t,a)=>{f(t,y),h(t,s,e(t,a.data_src))},S=(a,s,o)=>{const r=e(a,s.data_bg),m=e(a,s.data_bg_hidpi),i=p&&m?m:r;i&&(a.style.backgroundImage=`url("${i}")`,n(a).setAttribute(t,i),E(a,s,o))},w=(t,a,s)=>{const o=e(t,a.data_bg_multi),r=e(t,a.data_bg_multi_hidpi),m=p&&r?r:o;m&&(t.style.backgroundImage=m,A(t,a,s))},x=(t,a,s)=>{const o=e(t,a.data_bg_set);if(!o)return;const r=o.split("|");let m=r.map((t=>`image-set(${t})`));t.style.backgroundImage=m.join(),""===t.style.backgroundImage&&(m=r.map((t=>`-webkit-image-set(${t})`)),t.style.backgroundImage=m.join()),A(t,a,s)},z={IMG:$,IFRAME:M,VIDEO:N,OBJECT:O},B=(t,a)=>{const s=z[t.tagName];s&&s(t,a)},C=(t,a,s)=>{const o=z[t.tagName];o&&(o(t,a),E(t,a,s))};export{A as manageApplied,E as manageLoading,h as setAttributeIfValue,S as setBackground,v as setImageAttributes,x as setImgsetBackground,w as setMultiBackground,C as setSources,M as setSourcesIframe,$ as setSourcesImg,B as setSourcesNative,O as setSourcesObject,N as setSourcesVideo};
