!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).LazyLoad=n()}(this,(function(){"use strict";function t(){return(t=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t}).apply(this,arguments)}var n="undefined"!=typeof window,e=n&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),o=n&&"IntersectionObserver"in window,a=n&&"classList"in document.createElement("p"),i={elements_selector:"img",container:e||n?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_multi:"bg-multi",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",load_delay:0,auto_unobserve:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,use_native:!1},r=function(n){return t({},i,n)},l=function(t,n){var e,o=new t(n);try{e=new CustomEvent("LazyLoad::Initialized",{detail:{instance:o}})}catch(t){(e=document.createEvent("CustomEvent")).initCustomEvent("LazyLoad::Initialized",!1,!1,{instance:o})}window.dispatchEvent(e)},c=function(t,n){return t.getAttribute("data-"+n)},s=function(t,n,e){var o="data-"+n;null!==e?t.setAttribute(o,e):t.removeAttribute(o)},u=function(t,n){return s(t,"ll-status",n)},d=function(t,n){return s(t,"ll-timeout",n)},f=function(t){return c(t,"ll-timeout")},_=function(t,n,e,o){t&&(void 0===o?void 0===e?t(n):t(n,e):t(n,e,o))},g=function(t,n){a?t.classList.add(n):t.className+=(t.className?" ":"")+n},v=function(t,n){a?t.classList.remove(n):t.className=t.className.replace(new RegExp("(^|\\s+)"+n+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},p=function(t){return t.llTempImage},b=function(t){t&&(t.loadingCount+=1)},h=function(t){for(var n,e=[],o=0;n=t.children[o];o+=1)"SOURCE"===n.tagName&&e.push(n);return e},m=function(t,n,e){e&&t.setAttribute(n,e)},y=function(t,n){m(t,"sizes",c(t,n.data_sizes)),m(t,"srcset",c(t,n.data_srcset)),m(t,"src",c(t,n.data_src))},E={IMG:function(t,n){var e=t.parentNode;e&&"PICTURE"===e.tagName&&h(e).forEach((function(t){y(t,n)}));y(t,n)},IFRAME:function(t,n){m(t,"src",c(t,n.data_src))},VIDEO:function(t,n){h(t).forEach((function(t){m(t,"src",c(t,n.data_src))})),m(t,"poster",c(t,n.data_poster)),m(t,"src",c(t,n.data_src)),t.load()}},I=function(t,n,e){var o=E[t.tagName];o&&(o(t,n),b(e),g(t,n.class_loading),u(t,"loading"),_(n.callback_loading,t,e),_(n.callback_reveal,t,e))},k=["IMG","IFRAME","VIDEO"],L=function(t,n){!n||n.toLoadCount||n.loadingCount||_(t.callback_finish,n)},w=function(t,n,e){t.addEventListener(n,e)},C=function(t,n,e){t.removeEventListener(n,e)},A=function(t,n,e){C(t,"load",n),C(t,"loadeddata",n),C(t,"error",e)},z=function(t,n,e){!function(t){delete t.llTempImage}(t),function(t,n){n&&(n.loadingCount-=1)}(0,e),v(t,n.class_loading)},O=function(t,n,e){var o=p(t)||t,a=function a(r){!function(t,n,e,o){z(n,e,o),g(n,e.class_loaded),u(n,"loaded"),_(e.callback_loaded,n,o),L(e,o)}(0,t,n,e),A(o,a,i)},i=function i(r){!function(t,n,e,o){z(n,e,o),g(n,e.class_error),u(n,"error"),_(e.callback_error,n,o),L(e,o)}(0,t,n,e),A(o,a,i)};!function(t,n,e){w(t,"load",n),w(t,"loadeddata",n),w(t,"error",e)}(o,a,i)},N=function(t,n){n&&(n.toLoadCount-=1)},x=function(t,n,e){!function(t){t.llTempImage=document.createElement("img")}(t),O(t,n,e),function(t,n,e){var o=c(t,n.data_bg);o&&(t.style.backgroundImage='url("'.concat(o,'")'),p(t).setAttribute("src",o),b(e),g(t,n.class_loading),u(t,"loading"),_(n.callback_loading,t,e),_(n.callback_reveal,t,e))}(t,n,e),function(t,n,e){var o=c(t,n.data_bg_multi);o&&(t.style.backgroundImage=o,g(t,n.class_applied),u(t,"applied"),_(n.callback_applied,t,e))}(t,n,e)},M=function(t,n,e){!function(t){return k.indexOf(t.tagName)>-1}(t)?x(t,n,e):function(t,n,e){O(t,n,e),I(t,n,e)}(t,n,e),N(0,e),function(t,n){if(n){var e=n._observer;e&&n._settings.auto_unobserve&&e.unobserve(t)}}(t,e),L(n,e)},R=function(t){var n=f(t);n&&(clearTimeout(n),d(t,null))},T=function(t,n,e){var o=e._settings;_(o.callback_enter,t,n,e),o.load_delay?function(t,n,e){var o=n.load_delay,a=f(t);a||(a=setTimeout((function(){M(t,n,e),R(t)}),o),d(t,a))}(t,o,e):M(t,o,e)},j=["IMG","IFRAME"],F=function(t){return t.use_native&&"loading"in HTMLImageElement.prototype},G=function(t,n,e){t.forEach((function(t){-1!==j.indexOf(t.tagName)&&(t.setAttribute("loading","lazy"),function(t,n,e){O(t,n,e),I(t,n,e),N(0,e),u(t,"native"),L(n,e)}(t,n,e))})),e.toLoadCount=0},D=function(t,n){!function(t){t.disconnect()}(t),function(t,n){n.forEach((function(n){t.observe(n),u(n,"observed")}))}(t,n)},P=function(t){var n;o&&!F(t._settings)&&(t._observer=new IntersectionObserver((function(n){n.forEach((function(n){return function(t){return t.isIntersecting||t.intersectionRatio>0}(n)?T(n.target,n,t):function(t,n,e){var o=e._settings;_(o.callback_exit,t,n,e),o.load_delay&&R(t)}(n.target,n,t)}))}),{root:(n=t._settings).container===document?null:n.container,rootMargin:n.thresholds||n.threshold+"px"}))},S=function(t){return Array.prototype.slice.call(t)},U=function(t){return t.container.querySelectorAll(t.elements_selector)},V=function(t){return!function(t){return null!==c(t,"ll-status")}(t)||function(t){return"observed"===c(t,"ll-status")}(t)},$=function(t){return function(t){return"error"===c(t,"ll-status")}(t)},q=function(t,n){return function(t){return S(t).filter(V)}(t||U(n))},H=function(t){var n,e=t._settings;(n=U(e),S(n).filter($)).forEach((function(t){v(t,e.class_error),function(t){s(t,"ll-status",null)}(t)})),t.update()},B=function(t,e){var o;this._settings=r(t),this.loadingCount=0,P(this),o=this,n&&window.addEventListener("online",(function(t){H(o)})),this.update(e)};return B.prototype={update:function(t){var n=this._settings,a=q(t,n);this.toLoadCount=a.length,!e&&o?F(n)?G(a,n,this):D(this._observer,a):this.loadAll(a)},destroy:function(){this._observer&&this._observer.disconnect(),delete this._observer,delete this._settings,delete this.loadingCount,delete this.toLoadCount},loadAll:function(t){var n=this,e=this._settings;q(t,e).forEach((function(t){M(t,e,n)}))},load:function(t){M(t,this._settings,this)}},B.load=function(t,n){var e=r(n);M(t,e)},n&&function(t,n){if(n)if(n.length)for(var e,o=0;e=n[o];o+=1)l(t,e);else l(t,n)}(B,window.lazyLoadOptions),B}));
